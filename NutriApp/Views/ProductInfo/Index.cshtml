@using NutriApp.Models.SpoonModels
@using NutriApp.Controllers
@using NutriApp.Helpers
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model List<ProductSelectionItem>
@{
}

<div class="text-center">
    <h1>ProductInfo Index Page</h1>
</div>
<div class="container">
  <div class="row justify-content-center p-3">
    <div class="col-auto">
      <form asp-controller="ProductInfo" asp-action="Index">
          <label for="Name">Wyszukaj produkt</label>
          <input name="Name" placeholder="Wyszukaj" />
          <input type="submit" />
      </form>
    </div>
    <div class="col-auto">
      <ul>
        @foreach (var item in (List<ProductSelectionItem>) ViewData["ProductSelectionList"])
        {
            <li data-productId=@item.Id class="selectionItems">
                @item.Name
            </li>
        }
      </ul>
    </div>
  </div>
  <div class="col-md-auto"></div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
<script type="text/javascript">

var assetStatusEnum = @(Html.EnumToString<Units>())

$(".selectionItems").click(function() {
    CallController((this));
});

function CallController(el) {
    $.ajax({
        type: "GET",
        url: "/ProductInfo/GetProductInformation",
        data: { "productId": el.dataset.productid },
        success: function(data) {
            console.log(data);
            var Nutritions = data.nutrition;
            console.log(Nutritions);
            console.log(data.unit);
        },
        error: function(xhr, ajaxOptions, thrownError) {
            console.log("erro");
        },
        complete: function(data) {
            console.log("succes");
        }
    });
};

</script>